<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç™»å½• - OKX AI åˆ†æç³»ç»Ÿ</title>
<link rel="stylesheet" href="/css/style.css">
</head>
<body>
<div class="login-page">
  <div class="login-card">
    <div class="login-logo">
      <h1>ğŸ¤– OKX AI åˆ†æç³»ç»Ÿ</h1>
      <p>ç°è´§ AI æ™ºèƒ½åˆ†æ V2.0</p>
    </div>
    <div id="err" style="display:none;color:var(--accent-red);font-size:13px;margin-bottom:12px;text-align:center;"></div>
    <div class="form-group">
      <label class="form-label">è®¿é—®å¯†ç </label>
      <input type="password" class="form-control" id="pwd" placeholder="è¯·è¾“å…¥ç®¡ç†å¯†ç " autofocus>
    </div>
    <button class="btn btn-primary" style="width:100%;justify-content:center;" onclick="doLogin()">ç™» å½•</button>
  </div>
</div>
<script src="/js/app.js"></script>
<script>
async function doLogin() {
  const pwd = document.getElementById('pwd').value;
  if (!pwd) return;
  try {
    const res = await fetch('/api/auth/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ password: pwd }),
    });
    if (!res.ok) throw new Error('å¯†ç é”™è¯¯');
    const { token } = await res.json();
    auth.setToken(token);
    window.location.href = '/';
  } catch (e) {
    document.getElementById('err').textContent = e.message;
    document.getElementById('err').style.display = 'block';
  }
}
document.getElementById('pwd').addEventListener('keydown', e => { if (e.key === 'Enter') doLogin(); });
// å·²ç™»å½•ç›´æ¥è·³é¦–é¡µ
if (auth.isLoggedIn()) window.location.href = '/';
</script>
</body>
</html>
